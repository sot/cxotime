
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cxotime.cxotime &#8212; cxotime 0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">Ska!</span><span id="logotext2">CXO</span><span id="logotext3">Time</span></a>
  <ul>
    
    <li><a class="home" title="Homepage" href="https://cxc.cfa.harvard.edu/mta/ASPECT/tool_doc">
        <span id="logotext1">ska</span><span id="logotext2">tools</span>
    </a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li>
	<a href="../../index.html">cxotime 0.1 documentation</a>
	 &#187;
      </li>
      <li><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
      
       
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for cxotime.cxotime</h1><div class="highlight"><pre>
<span></span><span class="c1"># Licensed under a 3-clause BSD style license - see LICENSE.rst</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>

<span class="kn">from</span> <span class="nn">astropy.time</span> <span class="kn">import</span> <span class="n">Time</span><span class="p">,</span> <span class="n">TimeCxcSec</span><span class="p">,</span> <span class="n">TimeYearDayTime</span><span class="p">,</span> <span class="n">TimeDecimalYear</span>
<span class="kn">from</span> <span class="nn">astropy.utils</span> <span class="kn">import</span> <span class="n">iers</span>

<span class="c1"># For working in Chandra operations, possibly with no network access, we cannot</span>
<span class="c1"># allow auto downloads.</span>
<span class="n">iers</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">auto_download</span> <span class="o">=</span> <span class="kc">False</span>


<div class="viewcode-block" id="CxoTime"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.CxoTime">[docs]</a><span class="k">class</span> <span class="nc">CxoTime</span><span class="p">(</span><span class="n">Time</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Time class for Chandra analysis that is based on ``astropy.time.Time``.</span>

<span class="sd">    The CXO-specific time formats which are added to the astropy ``Time`` class</span>
<span class="sd">    are shown in the table below.  Like ``DateTime``, the ``CxoTime`` class</span>
<span class="sd">    default is to interpret any numerical values as ``secs`` (aka ``cxcsec`` in</span>
<span class="sd">    the native ``Time`` class).</span>

<span class="sd">    All of these formats use the UTC scale.</span>

<span class="sd">    ========= ===========================================</span>
<span class="sd">     Format   Description</span>
<span class="sd">    ========= ===========================================</span>
<span class="sd">    secs      Seconds since 1998-01-01T00:00:00 (TT)</span>
<span class="sd">    date      YYYY:DDD:hh:mm:ss.ss..</span>
<span class="sd">    frac_year YYYY.ffffff = date as a floating point year</span>
<span class="sd">    greta     YYYYDDD.hhmmsssss</span>
<span class="sd">    ========= ===========================================</span>

<span class="sd">    Important differences:</span>

<span class="sd">    - In ``CxoTime`` the date &#39;2000:001&#39; is &#39;2000:001:00:00:00&#39; instead of</span>
<span class="sd">      &#39;2000:001:12:00:00&#39; in ``DateTime``.  In most cases this interpretation</span>
<span class="sd">      is more rational and expected.</span>

<span class="sd">    - In ``CxoTime`` the date &#39;2001-01-01T00:00:00&#39; is UTC by default, while in</span>
<span class="sd">      ``DateTime`` that is interpreted as TT by default.  This is triggered by</span>
<span class="sd">      the ``T`` in the middle.  A date like &#39;2001-01-01 00:00:00&#39; defaults</span>
<span class="sd">      to UTC in both ``CxoTime`` and ``DateTime``.</span>

<span class="sd">    The standard built-in Time formats that are available in ``CxoTime`` are:</span>

<span class="sd">    ===========  ==============================</span>
<span class="sd">    Format       Example</span>
<span class="sd">    ===========  ==============================</span>
<span class="sd">    byear        1950.0</span>
<span class="sd">    byear_str    &#39;B1950.0&#39;</span>
<span class="sd">    cxcsec       63072064.184</span>
<span class="sd">    datetime     datetime(2000, 1, 2, 12, 0, 0)</span>
<span class="sd">    decimalyear  2000.45</span>
<span class="sd">    fits         &#39;2000-01-01T00:00:00.000(TAI)&#39;</span>
<span class="sd">    gps          630720013.0</span>
<span class="sd">    iso          &#39;2000-01-01 00:00:00.000&#39;</span>
<span class="sd">    isot         &#39;2000-01-01T00:00:00.000&#39;</span>
<span class="sd">    jd           2451544.5</span>
<span class="sd">    jyear        2000.0</span>
<span class="sd">    jyear_str    &#39;J2000.0&#39;</span>
<span class="sd">    mjd          51544.0</span>
<span class="sd">    plot_date    730120.0003703703</span>
<span class="sd">    unix         946684800.0</span>
<span class="sd">    yday         2000:001:00:00:00.000</span>
<span class="sd">    ===========  ==============================</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Handle the case of `CxoTime()` which returns the current time. This is</span>
        <span class="c1"># for compatibility with DateTime.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;cannot supply keyword arguments with no time value&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;DateTime&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;only one positional arg when DateTime is supplied&#39;</span><span class="p">)</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">date</span><span class="p">,)</span>
                <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="s1">&#39;utc&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;must use scale &#39;utc&#39; for DateTime input&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;date&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;must use format &#39;date&#39; for DateTime input&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># For `CxoTime()`` return the current time in `date` format.</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">Time</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">yday</span><span class="p">,</span> <span class="p">)</span>

        <span class="c1"># If format is supplied and is a DateTime format then require scale=&#39;utc&#39;.</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">)</span>
        <span class="n">fmts_datetime</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;greta&#39;</span><span class="p">,</span> <span class="s1">&#39;secs&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;frac_year&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="n">fmts_datetime</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="s1">&#39;utc&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;must use scale &#39;utc&#39; for format &#39;</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&#39;&#39;&quot;</span><span class="p">)</span>

        <span class="c1"># If format is not supplied and one arg (val) supplied then guess format</span>
        <span class="c1"># in DateTime-compatibility mode. That means forcing scale to UTC.</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">kwargs_orig</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;utc&#39;</span>

            <span class="c1"># TODO: `val = np.asarray(args[0])`, then check dtype and infer fmt</span>
            <span class="c1"># from first element of `val`</span>

            <span class="k">for</span> <span class="n">fmt</span> <span class="ow">in</span> <span class="n">fmts_datetime</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmt</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="nb">super</span><span class="p">(</span><span class="n">CxoTime</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">kwargs_orig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="s1">&#39;utc&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;must use scale &#39;utc&#39; for format &#39;</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&#39;&#39;&quot;</span><span class="p">)</span>
                    <span class="k">return</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs_orig</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CxoTime</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="CxoTime.now"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.CxoTime.now">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">now</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span></div>

    <span class="n">now</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="vm">__doc__</span></div>


<div class="viewcode-block" id="TimeSecs"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeSecs">[docs]</a><span class="k">class</span> <span class="nc">TimeSecs</span><span class="p">(</span><span class="n">TimeCxcSec</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Chandra X-ray Center seconds from 1998-01-01 00:00:00 TT.</span>
<span class="sd">    For example, 63072064.184 is midnight on January 1, 2000.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;secs&#39;</span></div>


<div class="viewcode-block" id="TimeDate"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeDate">[docs]</a><span class="k">class</span> <span class="nc">TimeDate</span><span class="p">(</span><span class="n">TimeYearDayTime</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Year, day-of-year and time as &quot;YYYY:DOY:HH:MM:SS.sss...&quot; in UTC.</span>

<span class="sd">    The day-of-year (DOY) goes from 001 to 365 (366 in leap years).</span>
<span class="sd">    For example, 2000:001:00:00:00.000 is midnight on January 1, 2000.</span>

<span class="sd">    Time value in this format is always UTC regardless of the time scale</span>
<span class="sd">    of the time object.  For example::</span>

<span class="sd">      &gt;&gt;&gt; t = CxoTime(&#39;2000-01-01&#39;, scale=&#39;tai&#39;)</span>
<span class="sd">      &gt;&gt;&gt; t.iso</span>
<span class="sd">      &#39;2000-01-01 00:00:00.000&#39;</span>
<span class="sd">      &gt;&gt;&gt; t.date</span>
<span class="sd">      &#39;1999:365:23:59:28.000&#39;</span>

<span class="sd">    The allowed subformats are:</span>

<span class="sd">    - &#39;date_hms&#39;: date + hours, mins, secs (and optional fractional secs)</span>
<span class="sd">    - &#39;date_hm&#39;: date + hours, mins</span>
<span class="sd">    - &#39;date&#39;: date</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span>

<div class="viewcode-block" id="TimeDate.to_value"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeDate.to_value">[docs]</a>    <span class="k">def</span> <span class="nf">to_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">parent</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">_time</span><span class="o">.</span><span class="n">value</span></div>

    <span class="n">value</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">to_value</span><span class="p">)</span></div>


<div class="viewcode-block" id="TimeFracYear"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeFracYear">[docs]</a><span class="k">class</span> <span class="nc">TimeFracYear</span><span class="p">(</span><span class="n">TimeDecimalYear</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Time as a decimal year, with integer values corresponding to midnight</span>
<span class="sd">    of the first day of each year.  For example 2000.5 corresponds to the</span>
<span class="sd">    ISO time &#39;2000-07-02 00:00:00&#39;.</span>

<span class="sd">    Time value is always in UTC regardless of time object scale.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;frac_year&#39;</span>

<div class="viewcode-block" id="TimeFracYear.to_value"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeFracYear.to_value">[docs]</a>    <span class="k">def</span> <span class="nf">to_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">parent</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">_time</span><span class="o">.</span><span class="n">value</span></div>

    <span class="n">value</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">to_value</span><span class="p">)</span></div>


<div class="viewcode-block" id="TimeGreta"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeGreta">[docs]</a><span class="k">class</span> <span class="nc">TimeGreta</span><span class="p">(</span><span class="n">TimeDate</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Date in format YYYYDDD.hhmmsssss, where sssss is number of milliseconds.</span>

<span class="sd">    Time value is always in UTC regardless of time object scale.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;greta&#39;</span>

    <span class="n">subfmts</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;date_hms&#39;</span><span class="p">,</span>
                <span class="s1">&#39;%Y%j%H%M%S&#39;</span><span class="p">,</span>
                <span class="s1">&#39;</span><span class="si">{year:d}{yday:03d}{hour:02d}{min:02d}{sec:02d}</span><span class="s1">&#39;</span><span class="p">),)</span>

    <span class="k">def</span> <span class="nf">_check_val_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">):</span>
        <span class="c1"># Note: don&#39;t care about val2 for these classes</span>
        <span class="k">if</span> <span class="n">val1</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">kind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Input values for </span><span class="si">{0}</span><span class="s1"> class must be strings or numbers&#39;</span>
                            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">val1</span><span class="p">,</span> <span class="kc">None</span>

<div class="viewcode-block" id="TimeGreta.set_jds"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeGreta.set_jds">[docs]</a>    <span class="k">def</span> <span class="nf">set_jds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remake the input to a form that standard parsing will work with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="n">val1</span><span class="o">.</span><span class="n">shape</span>

        <span class="c1"># Allow for float input</span>
        <span class="k">if</span> <span class="n">val1</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">kind</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">):</span>
            <span class="n">val1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{:.9f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">val1</span><span class="o">.</span><span class="n">flat</span><span class="p">])</span>

        <span class="c1"># Reformat from YYYYDDD.HHMMSSsss to YYYYDDDHHMMSS.sss</span>
        <span class="n">val1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">14</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">14</span><span class="p">:]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">val1</span><span class="o">.</span><span class="n">flat</span><span class="p">])</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">TimeGreta</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">set_jds</span><span class="p">(</span><span class="n">val1</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">),</span> <span class="n">val2</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeGreta.to_value"><a class="viewcode-back" href="../../index.html#cxotime.cxotime.TimeGreta.to_value">[docs]</a>    <span class="k">def</span> <span class="nf">to_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;utc&#39;</span><span class="p">:</span>
            <span class="n">out1</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out1</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">utc</span><span class="o">.</span><span class="n">_time</span><span class="o">.</span><span class="n">value</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">14</span><span class="p">:]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">out1</span><span class="o">.</span><span class="n">flat</span><span class="p">])</span>
        <span class="n">out</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">out1</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="n">value</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">to_value</span><span class="p">)</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>


<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right"> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2015, Tom Aldcroft.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.1.2. &nbsp;
  </p>
</footer>
  </body>
</html>